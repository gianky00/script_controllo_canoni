{% extends "base.html" %}

{% block title %}Visualizzatore Timbrature{% endblock %}

{% block content %}
    <h1>Visualizzatore Timbrature</h1>
    <p>Questa tabella mostra tutti i record di timbratura importati nel sistema.</p>

    <div class="card">
        <div class="card-body">
            <table id="timbratureTable" class="table table-striped" style="width:100%">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Nome</th>
                        <th>Cognome</th>
                        <th>Sito</th>
                        <th>Reparto</th>
                        <th>Ingresso</th>
                        <th>Uscita</th>
                        <th>Ore Contabili</th>
                        <th>Avvisi</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in records %}
                    <tr>
                        <td>{{ record.data.strftime('%Y-%m-%d') if record.data else '' }}</td>
                        <td>{{ record.nome }}</td>
                        <td>{{ record.cognome }}</td>
                        <td>{{ record.sito }}</td>
                        <td>{{ record.reparto }}</td>
                        <td>{{ record.ingresso.strftime('%H:%M') if record.ingresso else '' }}</td>
                        <td>{{ record.uscita.strftime('%H:%M') if record.uscita else '' }}</td>
                        <td>{{ "%.2f"|format(record.ore_contabili|float) if record.ore_contabili is not none else '' }}</td>
                        <td>{{ record.avvisi_sistema }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script>
$(document).ready(function() {
    $('#timbratureTable').DataTable({
        language: {
            url: '//cdn.datatables.net/plug-ins/1.13.6/i18n/it-IT.json',
        },
        pageLength: 25,
        responsive: true
    });
});
</script>
{% endblock %}
